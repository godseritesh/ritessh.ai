import{j as e}from"./index-BuCJkyDI.js";import{r}from"./react-vendor-BJsMWidF.js";import{A as a,m as t}from"./motion-BLm2Cfqc.js";import{X as s,e as l,E as i}from"./icons-BoCQK4qm.js";const n=({isOpen:n,onClose:o,projectName:c,projectUrl:d,fallbackUrl:x})=>{const[m,b]=r.useState(!0),[g,u]=r.useState(!1),f=r.useRef(null),p=()=>{b(!0),u(!1),o()};return r.useEffect(()=>{if(n)return b(!0),u(!1),f.current&&window.clearTimeout(f.current),f.current=window.setTimeout(()=>{m&&u(!0)},4e3),()=>{f.current&&window.clearTimeout(f.current)}},[n]),e.jsx(a,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40","aria-hidden":"true"}),e.jsx(t.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{className:"w-full max-w-4xl h-[80vh] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[e.jsx("h2",{id:"modal-title",className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white truncate",children:c}),e.jsx("button",{onClick:p,"aria-label":"Close modal",className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(s,{size:24,className:"text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex-1 relative overflow-hidden bg-gray-100 dark:bg-gray-800",children:[m&&!g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:e.jsx(l,{size:48,className:"text-blue-500 animate-spin"})}),g?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Preview cannot be embedded (blocked by site). You can open the project in a new tab."}),e.jsxs("a",{href:x||d,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg",children:["Open in New Tab",e.jsx(i,{size:14})]})]})}):e.jsx("iframe",{src:d,title:c,className:"w-full h-full border-0",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",onLoad:()=>{b(!1),u(!1),f.current&&(window.clearTimeout(f.current),f.current=null)}})]}),e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Preview of ",c]}),x&&e.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:["Open in New Tab",e.jsx(i,{size:16})]})]})]})})]})})};export{n as ProjectModal};
